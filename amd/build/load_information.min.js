define(["jquery","core/ajax","core/templates","core/notification"],function(a,b,c,d){var e=function(e){var f=b.call([{methodname:"tool_supporter_get_assignable_roles",args:{courseID:e}}]);f[0].done(function(b){console.log("assignableRoles Returns: "),console.log(b),c.render("tool_supporter/enrolusersection",b).done(function(b,d){a('[data-region="enroluserregion"]').replaceWith(b),a('[data-region="enroluserregion"]').show(),c.runTemplateJS(d)}).fail(d.exception)}).fail(d.exception)},f=function(a){h.show_course_detail(a)},g=function(){var e=b.call([{methodname:"tool_supporter_toggle_course_visibility",args:{courseID:a("#selectedcourseid")[0].textContent}}]);e[0].done(function(b){console.log("toggle visibility return data"),console.log(b.courseDetails.visible),c.render("tool_supporter/course_detail",b).done(function(b,d){a('[data-region="course_details"]').replaceWith(b),a('[data-region="course_details"]').show(),c.runTemplateJS(d)}).fail(d.exception)}).fail(d.exception)},h={show_course_detail:function(f){a("html, body").animate({scrollTop:0},"slow");var g=b.call([{methodname:"tool_supporter_get_course_info",args:{courseID:f}}]);g[0].done(function(b){console.log("course detail data"),console.log(b),c.render("tool_supporter/course_detail",b).done(function(b,d){a('[data-region="course_details"]').replaceWith(b),a('[data-region="course_details"]').show(),c.runTemplateJS(d),1===a("#selecteduserid").length&&e(f)}).fail(d.exception)}).fail(d.exception)},toggle_course_visibility:function(){a("#hide_course_visibility").on("click",function(){g()}),a("#show_course_visibility").on("click",function(){g()})},hide_user_details:function(){a("#hide_user_details").on("click",function(){a('[data-region="user_details"]').toggle()})},hide_course_detail:function(){a("#hide_course_details").on("click",function(){a('[data-region="course_details"]').toggle(),a('[data-region="enroluserregion"]').hide()})},click_on_user:function(f){a(f).on("click","tr",function(){var f=a(this).find("td:first-child").text();a("html, body").animate({scrollTop:0},"slow");var g=b.call([{methodname:"tool_supporter_get_user_information",args:{userid:f}}]);g[0].done(function(b){b=b[0],console.log("user detail data"),console.log(b),c.render("tool_supporter/user_detail",b).done(function(b,d){if(a('[data-region="user_details"]').replaceWith(b),a('[data-region="user_details"]').show(),1===a("#selectedcourseid").length){var f=a("#selectedcourseid")[0].textContent;e(f)}c.runTemplateJS(d)}).fail(d.exception)}).fail(d.exception)})},click_on_course:function(b){a(b).on("click","tr",function(){var b=a(this).find("td:first-child").text();f(b)})}};return h});