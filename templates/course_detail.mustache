<!--View details after clicking on a course in course table.  -->
<div class = "container">
  <div class="navbar">
    <div class="navbar-inner">
      <a class="brand" href="#">Kursinformationen</a>
      <ul class="nav">
        <!-- Place for buttons like "Show Course", "close detail information", "delete Course"-->
      </ul>
    </div>
  </div>
<!--Show course details  -->
  <div class="table-responsive">
    <table class = "table borderless table-striped">
      <tbody>
        {{#courseDetails}}
        <tr>
          <th>Kurs-ID</th>
          <td>{{id}}</td>
        </tr>
        <tr>
          <th>Kurzer Kursname</th>
          <td>{{shortname}}</td>
        </tr>
        <tr>
          <th>Vollständiger Kursname</th>
          <td>{{fullname}}</td>
        </tr>
        <tr>
          <th>Sichtbar</th>
          <td>{{visible}}</td>
        </tr>
        <tr>
          <th>Kurs-Pfad</th>
          <td>{{pfad}}</td>
        </tr>
        <tr>
          <th>Teilnehmer_innen</th>
          <td>{{enrolledUsers}}</td> <!--Number of enrolled users-->
        </tr>
        {{/courseDetails}}
        {{#roles}}
        <tr>
          <th>{{roleName}}</th>
          <td>{{roleNumber}}</td> <!--Number of users with role=roleName -->
        </tr>
        {{/roles}}
      </tbody>
    <table>
  </div>

  <!-- <div class="navbar">
    <div class = "navbar-inner"> -->
      <ul class="nav nav-tabs nav-justified" id = "myTabs">
        <li class="active"><a data-toggle="tab" href="#CoursePill_1">Eingeschriebene Nutzer_innen</a></li>
        <li><a data-toggle="tab" href="#CoursePill_2">Aktivitäten</a></li>
        <li class ="navbar-search pull-right">
            <input id="{{uniqid}}-courseDetailSearch" type="text" class="search-query" placeholder="Search"> <!--Search field for searching in tables below-->
        </li>
      </ul>

<!--    </div>
</div> -->

  <!-- <div class="tab-content">
   <div id="CoursePill_1" class="tab-pane fade in active">
     <h3>HOME</h3>
     <p>Some content.
       fsfsdfsdf
     </p>
     <div class="">
       test
     </div>
   </div>
   <div id="CoursePill_2" class="tab-pane fade">
     <h3>Menu 1</h3>
     <p>Some content in menu 1.</p>
     <table>
       <tr>
         <td>
           vdfvfdvfd
         </td>
       </tr>
     </table>
   </div>
 </div> -->

 <div class="tab-content">
    <div id="CoursePill_1" class="tab-pane fade in active">
      <!--table of users in this course-->
      <h3>User</h3>
      <div class="table-responsive">
        <table class = "table table-striped">
          <thead>
            <tr>
              <th>id</th>
              <th>TU-ID</th>
              <th>Vorname</th>
              <th>Nachname</th>
              <th>Rolle</th>
            </tr>
          </thead>
          <tbody id = "{{uniqid}}-userInCourse">
            {{#users}}
            <tr>
              <td>{{id}}</td>
              <td>{{username}}</td>
              <td>{{firstname}}</td>
              <td>{{lastname}}</td>
              <td>{{role}}</td>
              <td></td>
            </tr>
            {{/users}}
          </tbody>
        </table>
      </div>
    </div>

    <div id="CoursePill_2" class="tab-pane fade">
      <!--table of activites in this course-->
      <h3>Activities</h3>
      <div class="table-responsive">
        <table class = "table table-striped">
          <thead>
            <tr>
              <th>Name des Abschnitts</th>
              <th>Aktivität</th>
              <th>Name</th>
              <th>Sichtbar</th>
            </tr>
          </thead>
          <tbody id = "{{uniqid}}-activityInCourse">
            {{#activities}}
            <tr>
              <td>{{section}}</td>
              <td>{{activity}}</td>
              <td>{{name}}</td>
              <td>{{visibility}}</td>
            </tr>
            {{/activities}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

{{#js}}
require(['jquery','tool_supporter/table_search'], function($, search) {
  var tabTableID = "#{{uniqid}}-userInCourse";
  console.log('js in user detail');
  $('#myTabs a').click(function(e){
//    $(this).tab('show');
//    $('#CoursePill_2_table').toggle();
//    $('#CoursePill_1_table').toggle();
      var activeTab = e.target.getAttribute('href');
      console.log(e.target.getAttribute('href'));
    if(activeTab == "#CoursePill_1"){
      tabTableID = "#{{uniqid}}-userInCourse";
      console.log(tabTableID);
    }
    else if(activeTab == "#CoursePill_2"){
      tabTableID = "#{{uniqid}}-activityInCourse";
      console.log(tabTableID);
    }
  });
  //selecting the active table by selecting the active tab
//  $('a[data-toggle = "pill"]').on('shown', function(e){
//    console.log(e.target);
//    var activeTab = e.target.getAttribute('href');
//    if (activeTab == "#CoursePill_1")
//      tableID = "{{uniqid}}-userInCourse";
//    else (activeTab == "#CoursePill_2")
//        tableID =  "{{uniqid}}-activityInCourse";
//  });
console.log(tabTableID);
  search.searchEvent('#{{uniqid}}-courseDetailSearch',tabTableID);
});
{{/js}}
